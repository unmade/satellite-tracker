{"version":3,"sources":["module.js","earth.js","main.js"],"names":["TRACKER","namespace","ns","i","parts","split","parent","slice","length","earth","atmosphere","Kr","Km","ESun","g","innerRadius","outerRadius","wavelength","scaleDepth","mieScaleDepth","textureLoader","THREE","TextureLoader","diffuse","load","diffuseNight","diffuseSpecular","uniforms","v3LightPosition","type","value","Vector3","normalize","v3InvWavelength","Math","pow","fCameraHeight","fCameraHeight2","fInnerRadius","fInnerRadius2","fOuterRadius","fOuterRadius2","fKrESun","fKmESun","fKr4PI","PI","fKm4PI","fScale","fScaleDepth","fScaleOverScaleDepth","g2","nSamples","fSamples","tDiffuse","tDiffuseNight","tDiffuseSpecular","tDisplacement","tSkyboxDiffuse","fNightScale","fSpecularScale","fSpecularSize","ground","geometry","SphereGeometry","material","ShaderMaterial","vertexShader","$","text","fragmentShader","mesh","Mesh","sky","side","BackSide","transparent","document","ready","render","controls","update","requestAnimationFrame","cameraHeight","camera","position","renderer","scene","axes","axisLength","v","x","y","z","createAxis","p1","p2","color","line","lineGeometry","Geometry","lineMat","LineBasicMaterial","vertices","push","Line","add","onWindowResize","aspect","window","innerWidth","innerHeight","updateProjectionMatrix","setSize","webglEl","getElementById","width","height","Scene","PerspectiveCamera","set","up","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setClearColor","appendChild","domElement","TrackballControls","debugaxis","addEventListener"],"mappings":"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","file":"elektro-tracker.min.js","sourcesContent":["'use strict';\n\n\nvar TRACKER = TRACKER || {};\n\nTRACKER.namespace = function(ns) {\n    var parts = ns.split('.'),\n        parent = TRACKER,\n        i;\n    if (parts[0] === \"TRACKER\") {\n        parts = parts.slice(1);\n    }\n    for (i = 0; i < parts.length; i += 1) {\n       if (typeof parent[parts[i]] === \"undefined\") {\n           parent[parts[i]] = {};\n       }\n       parent = parent[parts[i]];\n   }\n   return parent;\n};\n","'use strict';\n\n\nTRACKER.namespace('earth');\n\nTRACKER.earth = (function() {\n    var atmosphere = {\n        Kr: 0.0025,\n        Km: 0.0010,\n        ESun: 20.0,\n        g: -0.950,\n        innerRadius: 100.0,\n        outerRadius: 101.5,\n        wavelength: [0.550, 0.50, 0.475],\n        scaleDepth: 0.25,\n        mieScaleDepth: 0.1\n    };\n    var textureLoader = new THREE.TextureLoader(),\n        diffuse = textureLoader.load('/src/images/earth/diffuse-low.jpg'),\n        diffuseNight = textureLoader.load('/src/images/earth/diffuse-night-low.jpg'),\n        diffuseSpecular = textureLoader.load('/src/images/earth/diffuse-specular-low.png');\n\n    var uniforms = {\n        v3LightPosition: {\n            type: \"v3\",\n            value: new THREE.Vector3(1e8, 0, 1e8).normalize()\n        },\n        v3InvWavelength: {\n            type: \"v3\",\n            value: new THREE.Vector3(1 / Math.pow(atmosphere.wavelength[0], 4),\n                                     1 / Math.pow(atmosphere.wavelength[1], 4),\n                                     1 / Math.pow(atmosphere.wavelength[2], 4))\n        },\n        fCameraHeight: {\n            type: \"f\",\n            value: 0\n        },\n        fCameraHeight2: {\n            type: \"f\",\n            value: 0\n        },\n        fInnerRadius: {\n            type: \"f\",\n            value: atmosphere.innerRadius\n        },\n        fInnerRadius2: {\n            type: \"f\",\n            value: atmosphere.innerRadius * atmosphere.innerRadius\n        },\n        fOuterRadius: {\n            type: \"f\",\n            value: atmosphere.outerRadius\n        },\n        fOuterRadius2: {\n            type: \"f\",\n            value: atmosphere.outerRadius * atmosphere.outerRadius\n        },\n        fKrESun: {\n            type: \"f\",\n            value: atmosphere.Kr * atmosphere.ESun\n        },\n        fKmESun: {\n            type: \"f\",\n            value: atmosphere.Km * atmosphere.ESun\n        },\n        fKr4PI: {\n            type: \"f\",\n            value: atmosphere.Kr * 4.0 * Math.PI\n        },\n        fKm4PI: {\n            type: \"f\",\n            value: atmosphere.Km * 4.0 * Math.PI\n        },\n        fScale: {\n            type: \"f\",\n            value: 1 / (atmosphere.outerRadius - atmosphere.innerRadius)\n        },\n        fScaleDepth: {\n            type: \"f\",\n            value: atmosphere.scaleDepth\n        },\n        fScaleOverScaleDepth: {\n            type: \"f\",\n            value: 1 / (atmosphere.outerRadius - atmosphere.innerRadius) / atmosphere.scaleDepth\n        },\n        g: {\n            type: \"f\",\n            value: atmosphere.g\n        },\n        g2: {\n            type: \"f\",\n            value: atmosphere.g * atmosphere.g\n        },\n        nSamples: {\n            type: \"i\",\n            value: 3\n        },\n        fSamples: {\n            type: \"f\",\n            value: 3.0\n        },\n        tDiffuse: {\n            type: \"t\",\n            value: diffuse\n        },\n        tDiffuseNight: {\n            type: \"t\",\n            value: diffuseNight\n        },\n        tDiffuseSpecular: {\n                type: \"t\",\n                value: diffuseSpecular\n        },\n        tDisplacement: {\n            type: \"t\",\n            value: 0\n        },\n        tSkyboxDiffuse: {\n            type: \"t\",\n            value: 0\n        },\n        fNightScale: {\n            type: \"f\",\n            value: 1\n        },\n        fSpecularScale: {\n            type: \"f\",\n            value: 1\n        },\n        fSpecularSize: {\n            type: \"f\",\n            value: 25\n        }\n    };\n\n\n    var ground = {\n        geometry: new THREE.SphereGeometry(atmosphere.innerRadius, 50, 50),\n        material: new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: $(\"#vertexGround\").text(),\n            fragmentShader: $(\"#fragmentGround\").text()\n        })\n    };\n    ground.mesh = new THREE.Mesh(ground.geometry, ground.material);\n\n\n    var sky = {\n        geometry: new THREE.SphereGeometry(atmosphere.outerRadius, 500, 500),\n        material: new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: $(\"#vertexSky\").text(),\n            fragmentShader: $(\"#fragmentSky\").text()\n        })\n    };\n    sky.mesh = new THREE.Mesh(sky.geometry, sky.material);\n\n    sky.material.side = THREE.BackSide;\n    sky.material.transparent = true;\n\n    return {\n        ground: ground,\n        sky: sky\n    }\n\n})();\n","'use strict';\n\n$(document).ready(function() {\n\tvar webglEl = document.getElementById('scene');\n\n\tvar width  = window.innerWidth,\n\t\theight = window.innerHeight;\n\n    var earth = TRACKER.earth;\n\n\tvar scene = new THREE.Scene();\n    scene.add(earth.ground.mesh);\n    scene.add(earth.sky.mesh);\n\n\n\tvar camera = new THREE.PerspectiveCamera(70, width / height, 0.1, 1000);\n\tcamera.position.set(0, 300, 300);\n\tcamera.up = new THREE.Vector3( 0, 0, 1 );\n\n\tvar renderer = new THREE.WebGLRenderer({ antialias: true });\n\trenderer.setPixelRatio(window.devicePixelRatio || 1);\n\trenderer.setSize(width, height);\n    renderer.setClearColor(0x000000, 1);\n    webglEl.appendChild(renderer.domElement);\n\n\n    var controls = new THREE.TrackballControls(camera);\n\n\tvar debugaxis = axes;\n\tdebugaxis(200);\n\trender();\n\n\tvar f = 0,\n\t\tg = 0;\n\n\tfunction render() {\n\t\tcontrols.update();\n        requestAnimationFrame(render);\n\n        var cameraHeight = camera.position.length();\n        earth.sky.material.uniforms.fCameraHeight.value = cameraHeight;\n        earth.sky.material.uniforms.fCameraHeight2.value = cameraHeight * cameraHeight;\n        earth.ground.material.uniforms.fCameraHeight.value = cameraHeight;\n        earth.ground.material.uniforms.fCameraHeight2.value = cameraHeight * cameraHeight;\n        return renderer.render(scene, camera);\n\t}\n\n\tfunction axes(axisLength){\n\t\tfunction v(x,y,z){\n\t\t\treturn new THREE.Vector3(x,y,z);\n\t\t}\n\n\t\t// Create axis (point1, point2, colour)\n\t\t// {x: red, y: green, z: blue}\n\t\tfunction createAxis(p1, p2, color){\n\t\t\tvar line, lineGeometry = new THREE.Geometry(),\n\t\t\tlineMat = new THREE.LineBasicMaterial({color: color});\n\t\t\tlineGeometry.vertices.push(p1, p2);\n\t\t\tline = new THREE.Line(lineGeometry, lineMat);\n\t\t\tscene.add(line);\n\t\t}\n\n\t\tcreateAxis(v(-axisLength, 0, 0), v(axisLength, 0, 0), 0xFF0000);\n\t\tcreateAxis(v(0, -axisLength, 0), v(0, axisLength, 0), 0x00FF00);\n\t\tcreateAxis(v(0, 0, -axisLength), v(0, 0, axisLength), 0x0000FF);\n\t};\n\n    function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize( window.innerWidth, window.innerHeight );\n    }\n    window.addEventListener( 'resize', onWindowResize, false );\n});\n"],"sourceRoot":"/source/"}