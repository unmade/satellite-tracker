{"version":3,"sources":["module.js","utils.js","celestial-object.js","celestial-object.uniforms.js","main.js","milkyway.js","satellite.js","sun.js"],"names":["TRACKER","namespace","ns","i","parts","split","parent","slice","length","utils","defferedOBJLoader","obj","name","url","defer","$","Deferred","loader","THREE","OBJLoader","load","event","resolve","defferedTextureLoader","TextureLoader","CelestialObject","userConf","atmosphere","diffuse","diffuseNight","diffuseSpecular","uniforms","Kr","Km","ESun","g","innerRadius","outerRadius","wavelength","scaleDepth","extend","configureUniforms","this","ground","Mesh","SphereGeometry","ShaderMaterial","vertexShader","text","fragmentShader","sky","side","BackSide","transparent","prototype","val","arguments","fKrESun","calcfKrESun","fKmESun","calcfKmESun","material","value","val2","g2","fKm4PI","calcfKm4PI","fKr4PI","calcfKr4PI","lightPosition","position","v3LightPosition","copy","normalize","setTextures","textures","tDiffuse","tDiffuseNight","tDiffuseSpecular","overScale","calcfScaleOverScaleDepth","fScaleDepth","fScaleOverScaleDepth","waveBlue","blue","calcvWaveChannel","v3InvWavelength","setZ","waveGreen","green","setY","waveRed","red","setX","Math","PI","pow","type","Vector3","fCameraHeight","fCameraHeight2","fInnerRadius","fInnerRadius2","fOuterRadius","fOuterRadius2","fScale","fNightScale","fSpecularScale","fSpecularSize","document","ready","init","assets","moonRadius","scale","now","Date","webglEl","getElementById","camera","PerspectiveCamera","width","height","up","scene","Scene","AxisHelper","renderer","WebGLRenderer","antialias","alpha","setPixelRatio","window","devicePixelRatio","setSize","setClearColor","appendChild","domElement","controls","TrackballControls","minDistance","maxDistance","addEventListener","onWindowResize","onLoad","sun","milkyway","earth","earthDay","earthNight","earthSpecular","moon","moonNight","moonSpecular","elektro","set","elektro1","Satellite","tle","clone","elektro2","propagate","multiplyScalar","lensFlare","light","add","object3d","AmbientLight","render","when","then","update","requestAnimationFrame","cameraHeight","cameraHeight2","aspect","innerWidth","innerHeight","updateProjectionMatrix","line1","line2","MeshBasicMaterial","map","ImageUtils","loadTexture","opacity","omega","axis","satrec","satellite","twoline2satrec","fixPosition","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","x","z","y","divideScalar","setObj","gmst","terraPosition","deg","_gmst","gstimeFromDate","applyAxisAngle","addLight","h","s","l","DirectionalLight","flareColor","Color","setHSL","LensFlare","textureFlare0","AdditiveBlending","textureFlare2","textureFlare3","customUpdateCallback","lensFlareUpdateCallback","object","f","flare","fl","lensFlares","vecX","positionScreen","vecY","distance","rotation","degToRad","textureLoader"],"mappings":"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","file":"elektro-tracker.min.js","sourcesContent":["'use strict';\n\n\nvar TRACKER = TRACKER || {};\n\nTRACKER.namespace = function(ns) {\n    var parts = ns.split('.'),\n        parent = TRACKER,\n        i;\n    if (parts[0] === \"TRACKER\") {\n        parts = parts.slice(1);\n    }\n    for (i = 0; i < parts.length; i += 1) {\n       if (typeof parent[parts[i]] === \"undefined\") {\n           parent[parts[i]] = {};\n       }\n       parent = parent[parts[i]];\n   }\n   return parent;\n};\n","TRACKER.namespace('utils');\n\nTRACKER.utils = (function() {\n    'use strict';\n\n    return {\n        defferedOBJLoader: defferedOBJLoader,\n        defferedTextureLoader: defferedTextureLoader\n    }\n\n\n    function defferedOBJLoader(obj, name, url)\n    {\n        var defer = $.Deferred();\n        var loader = new THREE.OBJLoader();\n        loader.load(url, function ( event ) {\n            obj[name] = event;\n            defer.resolve();\n        });\n\n        return defer;\n    }\n\n\n    function defferedTextureLoader(obj, name, url)\n    {\n        var defer = $.Deferred();\n        var loader = new THREE.TextureLoader();\n        loader.load(url, function ( event ) {\n            obj[name] = event;\n            defer.resolve();\n        });\n\n        return defer;\n    }\n\n})();\n","TRACKER.namespace('CelestialObject');\n\nTRACKER.CelestialObject = (function() {\n    'use strict';\n\n    function CelestialObject(userConf) {\n        var atmosphere,\n            diffuse,\n            diffuseNight,\n            diffuseSpecular,\n            uniforms;\n\n        atmosphere = {\n            Kr: 0.0025,\n            Km: 0.0010,\n            ESun: 20.0,\n            g: -0.950,\n            innerRadius: 100.0,\n            outerRadius: 101.5,\n            wavelength: [0.550, 0.50, 0.475],\n            scaleDepth: 0.25,\n        };\n        $.extend(atmosphere, userConf.atmosphere);\n\n        diffuse = userConf.diffuse;\n        diffuseNight = userConf.diffuseNight;\n        diffuseSpecular = userConf.diffuseSpecular;\n        uniforms = CelestialObject.uniforms.configureUniforms(diffuse, diffuseNight, diffuseSpecular, atmosphere);\n\n        this.atmosphere = atmosphere;\n        this.ground = new THREE.Mesh(\n            new THREE.SphereGeometry(atmosphere.innerRadius, 50, 50),\n            new THREE.ShaderMaterial({\n                uniforms: uniforms,\n                vertexShader: $(\"#vertexGround\").text(),\n                fragmentShader: $(\"#fragmentGround\").text()\n            })\n        );\n        this.sky = new THREE.Mesh(\n            new THREE.SphereGeometry(atmosphere.outerRadius, 500, 500),\n            new THREE.ShaderMaterial({\n                uniforms: uniforms,\n                vertexShader: $(\"#vertexSky\").text(),\n                fragmentShader: $(\"#fragmentSky\").text(),\n                side: THREE.BackSide,\n                transparent: true\n            })\n        );\n    };\n\n    CelestialObject.prototype.ESun = function(val) {\n        if (!arguments.length) return this.atmosphere.ESun;\n\n        var fKrESun = CelestialObject.uniforms.calcfKrESun(this.atmosphere.Kr, val),\n            fKmESun = CelestialObject.uniforms.calcfKmESun(this.atmosphere.Km, val);\n\n        this.atmosphere.ESun = val;\n        this.ground.material.uniforms.fKrESun.value = fKrESun;\n        this.ground.material.uniforms.fKmESun.value = fKmESun;\n        this.sky.material.uniforms.fKmESun.value = fKmESun;\n        this.sky.material.uniforms.fKrESun.value = fKrESun;\n    }\n\n    CelestialObject.prototype.g = function(val) {\n        if (!arguments.length) return this.atmosphere.g;\n\n        var val2 = val * val\n        this.atmosphere.g = val;\n        this.sky.material.uniforms.g.value = val;\n        this.sky.material.uniforms.g2.value = val2;\n        this.ground.material.uniforms.g.value = val;\n        this.ground.material.uniforms.g2.value = val2;\n    }\n\n    CelestialObject.prototype.Km = function(val) {\n        if (!arguments.length) return this.atmosphere.Km;\n\n        var fKmESun = CelestialObject.uniforms.calcfKmESun(val, this.atmosphere.ESun),\n            fKm4PI = CelestialObject.uniforms.calcfKm4PI(val);\n\n        this.atmosphere.Km = val;\n        this.ground.material.uniforms.fKmESun.value = fKmESun;\n        this.ground.material.uniforms.fKm4PI.value = fKm4PI;\n        this.sky.material.uniforms.fKm4PI.value = fKm4PI;\n        this.sky.material.uniforms.fKmESun.value = fKmESun;\n    }\n\n    CelestialObject.prototype.Kr = function(val) {\n        if (!arguments.length) return this.atmosphere.Kr;\n\n        var fKrESun = CelestialObject.uniforms.calcfKrESun(val, this.atmosphere.ESun),\n            fKr4PI = CelestialObject.uniforms.calcfKr4PI(val);\n\n        this.atmosphere.Kr = val;\n        this.ground.material.uniforms.fKrESun.value = fKrESun;\n        this.ground.material.uniforms.fKr4PI.value = fKr4PI;\n        this.sky.material.uniforms.fKr4PI.value = fKr4PI;\n        this.sky.material.uniforms.fKrESun.value = fKrESun;\n    }\n\n    CelestialObject.prototype.lightPosition = function(position) {\n        if (!arguments.length) return this.ground.material.uniforms.v3LightPosition.value;\n\n        this.ground.material.uniforms.v3LightPosition.value.copy(position).normalize();\n        this.sky.material.uniforms.v3LightPosition.value.copy(position).normalize();\n    };\n\n    CelestialObject.prototype.position = function(position) {\n        if (!arguments.length) return this.ground.position;\n\n        this.ground.position.copy(position);\n        this.sky.position.copy(position);\n    };\n\n    CelestialObject.prototype.setTextures = function(textures) {\n        if (textures.diffuse) {\n            this.ground.material.uniforms.tDiffuse.value = textures.diffuse;\n        }\n        if (textures.diffuseNight) {\n            this.ground.material.uniforms.tDiffuseNight.value = textures.diffuseNight;\n        }\n        if (textures.diffuseSpecular) {\n            this.ground.material.uniforms.tDiffuseSpecular.value = textures.diffuseSpecular;\n        }\n    };\n\n    CelestialObject.prototype.scaleDepth = function(val) {\n        if (!arguments.length) return this.atmosphere.scaleDepth;\n\n        var overScale = CelestialObject.uniforms.calcfScaleOverScaleDepth(this.atmosphere.innerRadius,\n                                                                          this.atmosphere.outerRadius,\n                                                                          this.atmosphere.scaleDepth);\n        this.atmosphere.scaleDepth = val;\n        this.ground.material.uniforms.fScaleDepth.value = val;\n        this.ground.material.uniforms.fScaleDepth.value = val;\n        this.sky.material.uniforms.fScaleOverScaleDepth.value = overScale;\n        this.sky.material.uniforms.fScaleOverScaleDepth.value = overScale;\n    }\n\n    CelestialObject.prototype.waveBlue = function(val) {\n        if (!arguments.length) return this.atmosphere.wavelength[2];\n\n        var blue = CelestialObject.uniforms.calcvWaveChannel(val);\n        this.atmosphere.wavelength[2] = val;\n        this.ground.material.uniforms.v3InvWavelength.value.setZ(blue);\n        this.sky.material.uniforms.v3InvWavelength.value.setZ(blue);\n    }\n\n    CelestialObject.prototype.waveGreen = function(val) {\n        if (!arguments.length) return this.atmosphere.wavelength[1];\n\n        var green = CelestialObject.uniforms.calcvWaveChannel(val);\n        this.atmosphere.wavelength[1] = val;\n        this.ground.material.uniforms.v3InvWavelength.value.setY(green);\n        this.sky.material.uniforms.v3InvWavelength.value.setY(green);\n    }\n\n    CelestialObject.prototype.waveRed = function(val) {\n        if (!arguments.length) return this.atmosphere.wavelength[0];\n\n        var red = CelestialObject.uniforms.calcvWaveChannel(val);\n        this.atmosphere.wavelength[0] = val;\n        this.ground.material.uniforms.v3InvWavelength.value.setX(red);\n        this.sky.material.uniforms.v3InvWavelength.value.setX(red);\n    }\n\n    return CelestialObject;\n\n})();\n","TRACKER.namespace('CelestialObject.uniforms');\n\nTRACKER.CelestialObject.uniforms = (function() {\n    'use strict';\n\n    return {\n        calcfKrESun: calcfKrESun,\n        calcfKmESun: calcfKmESun,\n        calcfKr4PI: calcfKr4PI,\n        calcfKm4PI: calcfKm4PI,\n        calcfScaleOverScaleDepth: calcfScaleOverScaleDepth,\n        calcvWaveChannel: calcvWaveChannel,\n        configureUniforms: configureUniforms\n    }\n\n    function calcfKrESun(Kr, ESun) {\n        return Kr * ESun\n    }\n\n    function calcfKmESun(Km, ESun) {\n        return Km * ESun\n    }\n\n    function calcfKr4PI(Kr) {\n        return Kr * 4 * Math.PI\n    }\n\n    function calcfKm4PI(Km) {\n        return Km * 4 * Math.PI\n    }\n\n    function calcfScaleOverScaleDepth(innerRadius, outerRadius, scaleDepth) {\n        return 1 / (outerRadius - innerRadius) / scaleDepth\n    }\n\n    function calcvWaveChannel(val) {\n        return 1 / Math.pow(val, 4)\n    }\n\n    function configureUniforms(diffuse, diffuseNight, diffuseSpecular, atmosphere) {\n        return {\n            v3LightPosition: {\n                type: \"v3\",\n                value: new THREE.Vector3(1e8, 0, 1e8).normalize()\n            },\n            v3InvWavelength: {\n                type: \"v3\",\n                value: new THREE.Vector3(calcvWaveChannel(atmosphere.wavelength[0]),\n                                         calcvWaveChannel(atmosphere.wavelength[1]),\n                                         calcvWaveChannel(atmosphere.wavelength[2]))\n            },\n            fCameraHeight: {\n                type: \"f\",\n                value: 0\n            },\n            fCameraHeight2: {\n                type: \"f\",\n                value: 0\n            },\n            fInnerRadius: {\n                type: \"f\",\n                value: atmosphere.innerRadius\n            },\n            fInnerRadius2: {\n                type: \"f\",\n                value: atmosphere.innerRadius * atmosphere.innerRadius\n            },\n            fOuterRadius: {\n                type: \"f\",\n                value: atmosphere.outerRadius\n            },\n            fOuterRadius2: {\n                type: \"f\",\n                value: atmosphere.outerRadius * atmosphere.outerRadius\n            },\n            fKrESun: {\n                type: \"f\",\n                value: calcfKrESun(atmosphere.Kr, atmosphere.ESun)\n            },\n            fKmESun: {\n                type: \"f\",\n                value: calcfKmESun(atmosphere.Km, atmosphere.ESun)\n            },\n            fKr4PI: {\n                type: \"f\",\n                value: calcfKr4PI(atmosphere.Kr)\n            },\n            fKm4PI: {\n                type: \"f\",\n                value: calcfKm4PI(atmosphere.Km)\n            },\n            fScale: {\n                type: \"f\",\n                value: 1 / (atmosphere.outerRadius - atmosphere.innerRadius)\n            },\n            fScaleDepth: {\n                type: \"f\",\n                value: atmosphere.scaleDepth\n            },\n            fScaleOverScaleDepth: {\n                type: \"f\",\n                value: calcfScaleOverScaleDepth(atmosphere.innerRadius, atmosphere.outerRadius, atmosphere.scaleDepth)\n            },\n            g: {\n                type: \"f\",\n                value: atmosphere.g\n            },\n            g2: {\n                type: \"f\",\n                value: atmosphere.g * atmosphere.g\n            },\n            tDiffuse: {\n                type: \"t\",\n                value: diffuse\n            },\n            tDiffuseNight: {\n                type: \"t\",\n                value: diffuseNight\n            },\n            tDiffuseSpecular: {\n                type: \"t\",\n                value: diffuseSpecular\n            },\n            fNightScale: {\n                type: \"f\",\n                value: 1\n            },\n            fSpecularScale: {\n                type: \"f\",\n                value: 1\n            },\n            fSpecularSize: {\n                type: \"f\",\n                value: 25\n            }\n        };\n    }\n})();\n","$(document).ready(function() {\n\t'use strict';\n\n\tvar utils = TRACKER.utils;\n\n\tvar width  = window.innerWidth,\n\t\theight = window.innerHeight;\n\n\tvar tle = {\n\t\telektro1: {\n\t\t\t\"line1\": \"1 37344U 11001A   16084.50580970  .00000000  00000-0  10000-3 0  9991\",\n\t\t\t\"line2\": \"2 37344   1.5394  79.7599 0005633 181.1213 179.7726  1.00271467 19002\"\n\t\t},\n\t\telektro2: {\n\t\t\t\"line1\": \"1 41105U 15074A   16084.53509896 -.00000132  00000-0  00000+0 0  9998\",\n\t\t\t\"line2\": \"2 41105   0.2604 277.8149 0001219 144.5680  30.4420  1.00273958  1058\"\n\t\t}\n\t};\n\n\tvar scale = 63.71;\n\n\tvar\tearth,\n\t\tmoon,\n\t\tsun,\n\t\tmilkyway,\n\t\telektro1,\n\t\telektro2;\n\n\tvar camera,\n\t\tscene,\n\t\trenderer,\n\t\tcontrols;\n\n\n\tinit();\n\n\n\tfunction init() {\n\t\tvar assets = {},\n\t\t\tearthRadius = 6371 / scale,\n\t\t\tmoonRadius = 1738.14 / scale,\n\t\t\tnow = new Date(),\n\t\t\tposition,\n\t\t\twebglEl = document.getElementById('scene');\n\n\t\tcamera = new THREE.PerspectiveCamera(20, width / height, 1, 2e5);\n\t\tcamera.up = new THREE.Vector3( 0, 1, 0 );\n\n\t\tscene = new THREE.Scene();\n\t\t// x: red, y: green, z: blue\n\t\tvar axisHelper = new THREE.AxisHelper( 1000 );\n\t\t// scene.add( axisHelper );\n\n\t\trenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true});\n\t\trenderer.setPixelRatio(window.devicePixelRatio || 1);\n\t\trenderer.setSize(width, height);\n\t\trenderer.setClearColor(0x000000, 1);\n\t\twebglEl.appendChild(renderer.domElement);\n\n\t\tcontrols = new THREE.TrackballControls(camera, document.getElementById('scene'));\n\t\tcontrols.minDistance = 300;\n\t\tcontrols.maxDistance = 1e5;\n\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\t\tvar onLoad = function() {\n\t\t\tsun = TRACKER.sun;\n\t\t\tmilkyway = TRACKER.milkyway;\n\n\t\t\tearth = new TRACKER.CelestialObject({\n\t\t\t\tdiffuse: assets.earthDay,\n\t\t\t\tdiffuseNight: assets.earthNight,\n\t\t\t\tdiffuseSpecular: assets.earthSpecular\n\t\t\t});\n\n\t\t\tmoon = new TRACKER.CelestialObject({\n\t\t\t\tatmosphere: {\n\t\t\t\t\tESun: 10,\n\t\t\t\t\tinnerRadius: moonRadius,\n\t\t\t\t\touterRadius: moonRadius + 0.1,\n\t\t\t\t\twavelength: [0.55, 0.55, 0.55]\n\t\t\t\t},\n\t\t\t\tdiffuse: assets.moon,\n\t\t\t\tdiffuseNight: assets.moonNight,\n\t\t\t\tdiffuseSpecular: assets.moonSpecular\n\t\t\t});\n\n\t\t\tassets.elektro.scale.set(1e-3, 1e-3, 1e-3);\n\t\t\telektro1 = new TRACKER.Satellite(tle.elektro1, scale, assets.elektro.clone());\n\t\t    elektro2 = new TRACKER.Satellite(tle.elektro2, scale, assets.elektro.clone());\n\t\t\tposition = elektro1.propagate(now);\n\t\t\telektro2.propagate(now);\n\n\t\t\tcamera.position.copy(position).multiplyScalar(1.05);\n\t\t\tearth.lightPosition(position);\n\t\t\tmoon.position(new THREE.Vector3(100, 4e5/scale, 200));\n\t\t\tmoon.lightPosition(position);\n\t\t\tsun.lensFlare.position.copy(position).multiplyScalar(1e2);\n\t\t\tsun.light.position.copy(position).multiplyScalar(1e2);\n\n\t\t\tscene.add(earth.ground);\n\t\t\tscene.add(earth.sky);\n\t\t\tscene.add(moon.ground);\n\t\t\tscene.add(moon.sky);\n\t\t\tscene.add(elektro1.object3d);\n\t\t\tscene.add(elektro2.object3d);\n\t\t\tscene.add(sun.lensFlare);\n\t\t\tscene.add(sun.light);\n\t\t\tscene.add(new THREE.AmbientLight(0x333333));\n\n\t\t\trender();\n\t\t};\n\n\t\t$.when(\n\t\t\tutils.defferedTextureLoader(assets, 'earthDay', '/src/images/earth/diffuse-low.jpg'),\n\t\t\tutils.defferedTextureLoader(assets, 'earthNight', '/src/images/earth/diffuse-night-low.jpg'),\n\t\t\tutils.defferedTextureLoader(assets, 'earthSpecular', '/src/images/earth/diffuse-specular-low.png'),\n\t\t\tutils.defferedTextureLoader(assets, 'moon', '/src/images/moon-low.jpg'),\n\t\t\tutils.defferedTextureLoader(assets, 'moonNight', '/src/images/earth/default-night.jpg'),\n\t\t\tutils.defferedTextureLoader(assets, 'moonSpecular', '/src/images/earth/default-specular.png'),\n\t\t\tutils.defferedOBJLoader(assets, 'elektro', '/src/obj/elektro.obj')\n\t\t)\n\t\t.then(function() {\n\t\t\tonLoad();\n\t\t});\n\t}\n\n\tfunction render() {\n\t\tcontrols.update();\n\n\t\trequestAnimationFrame(render);\n\n        var cameraHeight = camera.position.length(),\n\t\t\tcameraHeight2 = cameraHeight * cameraHeight;\n        earth.sky.material.uniforms.fCameraHeight.value = cameraHeight;\n        earth.sky.material.uniforms.fCameraHeight2.value = cameraHeight2;\n        earth.ground.material.uniforms.fCameraHeight.value = cameraHeight;\n        earth.ground.material.uniforms.fCameraHeight2.value = cameraHeight2;\n\t\tmoon.ground.material.uniforms.fCameraHeight.value = cameraHeight;\n        moon.ground.material.uniforms.fCameraHeight2.value = cameraHeight2;\n\t\tmoon.sky.material.uniforms.fCameraHeight.value = cameraHeight;\n        moon.sky.material.uniforms.fCameraHeight2.value = cameraHeight2;\n\n        return renderer.render(scene, camera);\n\t}\n\n    function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize( window.innerWidth, window.innerHeight );\n    }\n\n});\n","'use strict';\n\n\nTRACKER.namespace('milkyway');\n\n\nTRACKER.milkyway = (function() {\n    var milkyway = new THREE.Mesh(\n        new THREE.SphereGeometry(1e4, 64, 64),\n        new THREE.MeshBasicMaterial({\n            map: THREE.ImageUtils.loadTexture('/src/images/milkyway/milkyway.jpg'),\n            side: THREE.BackSide,\n            opacity: 0.1\n        })\n    )\n\n    return \t{\n        milkyway: milkyway\n    }\n})();\n","TRACKER.namespace('Satellite');\n\nTRACKER.Satellite = (function() {\n    'use strict';\n\n    var utils = TRACKER.utils,\n        omega = 2*Math.PI/86164.09,\n        Satellite;\n\n    Satellite = function(tle, scale, object3d) {\n        this.axis = new THREE.Vector3(0, 1, 0);\n        this.object3d = object3d;\n        this.satrec = satellite.twoline2satrec(tle.line1, tle.line2);\n        this.scale = scale;\n    };\n\n    Satellite.prototype.fixPosition = function(date) {\n        var position = satellite.propagate(\n    \t\tthis.satrec,\n    \t\tdate.getUTCFullYear(),\n    \t\tdate.getUTCMonth() + 1, // Note, this function requires months in range 1-12.\n    \t\tdate.getUTCDate(),\n    \t\tdate.getUTCHours(),\n    \t\tdate.getUTCMinutes(),\n    \t\tdate.getUTCSeconds()\n    \t).position;\n\n        return new THREE.Vector3(position.x, position.z, -position.y).divideScalar(this.scale);\n    };\n\n    Satellite.prototype.setObj = function(obj) {\n        this.object3d = obj;\n    };\n\n    Satellite.prototype.propagate = function(date, gmst) {\n        var position = this.terraPosition(date, gmst);\n        this.object3d.position.copy(position);\n\n        return position;\n    }\n\n    Satellite.prototype.terraPosition = function(date, gmst) {\n        var deg,\n            _gmst = gmst || satellite.gstimeFromDate(\n        \t\tdate.getUTCFullYear(),\n        \t\tdate.getUTCMonth() + 1, // Note, this function requires months in range 1-12.\n        \t\tdate.getUTCDate(),\n        \t\tdate.getUTCHours(),\n        \t\tdate.getUTCMinutes(),\n        \t\tdate.getUTCSeconds()\n        \t);\n\n        deg = _gmst * (180/Math.PI);\n        deg += (deg >= 360) ? -360 : (deg < 0) ? 360 : 0;\n\n        return this.fixPosition(date).applyAxisAngle(this.axis, -omega*deg/15*3600);\n    };\n\n    return Satellite;\n\n})();\n","'use strict';\n\n\nTRACKER.namespace('sun');\n\n\nTRACKER.sun = (function() {\n    var textureLoader = new THREE.TextureLoader(),\n        textureFlare0 = textureLoader.load( \"/src/images/lensflare/lensflare0.png\" ),\n        textureFlare2 = textureLoader.load( \"/src/images/lensflare/lensflare2.png\" ),\n        textureFlare3 = textureLoader.load( \"/src/images/lensflare/lensflare3.png\" );\n\n    var lensFlare,\n        light;\n\n    addLight( 0.55, 0.9, 0.5, 5000, 0, 5000 );\n\n\tfunction addLight( h, s, l, x, y, z ) {\n\t\tlight = new THREE.DirectionalLight( 0xffffff, 1 );\n\t\tlight.position.set( x, y, z );\n\n\t\tvar flareColor = new THREE.Color( 0xffffff );\n\t\tflareColor.setHSL( h, s, l + 0.5 );\n\t\tlensFlare = new THREE.LensFlare( textureFlare0, 350, 0.0, THREE.AdditiveBlending, flareColor );\n\t\tlensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 60, 0.6, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 70, 0.7, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 120, 0.9, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 70, 1.0, THREE.AdditiveBlending );\n\t\tlensFlare.customUpdateCallback = lensFlareUpdateCallback;\n\t\tlensFlare.position.set( x, y, z );\n\t}\n\n    function lensFlareUpdateCallback( object ) {\n\t\tvar f, fl = object.lensFlares.length;\n\t\tvar flare;\n\t\tvar vecX = -object.positionScreen.x * 2;\n\t\tvar vecY = -object.positionScreen.y * 2;\n\t\tfor( f = 0; f < fl; f++ ) {\n\t\t\tflare = object.lensFlares[ f ];\n\t\t\tflare.x = object.positionScreen.x + vecX * flare.distance;\n\t\t\tflare.y = object.positionScreen.y + vecY * flare.distance;\n\t\t\tflare.rotation = 0;\n\t\t}\n\t\tobject.lensFlares[ 2 ].y += 0.025;\n\t\tobject.lensFlares[ 3 ].rotation = object.positionScreen.x * 0.5 + THREE.Math.degToRad( 45 );\n\t}\n\n    return {\n        light: light,\n        lensFlare: lensFlare\n    }\n\n})();\n"],"sourceRoot":"/source/"}