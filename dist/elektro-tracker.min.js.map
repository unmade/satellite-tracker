{"version":3,"sources":["module.js","utils.js","earth.js","main.js","milkyway.js","satellite.js","sun.js"],"names":["TRACKER","namespace","ns","i","parts","split","parent","slice","length","utils","defferedOBJLoader","staticData","name","url","defer","$","Deferred","loader","THREE","OBJLoader","load","event","resolve","defferedTextureLoader","undefined","earth","atmosphere","Kr","Km","ESun","g","innerRadius","outerRadius","wavelength","scaleDepth","mieScaleDepth","textureLoader","TextureLoader","diffuse","diffuseNight","diffuseSpecular","uniforms","v3LightPosition","type","value","Vector3","normalize","v3InvWavelength","Math","pow","fCameraHeight","fCameraHeight2","fInnerRadius","fInnerRadius2","fOuterRadius","fOuterRadius2","fKrESun","fKmESun","fKr4PI","PI","fKm4PI","fScale","fScaleDepth","fScaleOverScaleDepth","g2","nSamples","fSamples","tDiffuse","tDiffuseNight","tDiffuseSpecular","tDisplacement","tSkyboxDiffuse","fNightScale","fSpecularScale","fSpecularSize","ground","geometry","SphereGeometry","material","ShaderMaterial","vertexShader","text","fragmentShader","mesh","Mesh","sky","side","BackSide","transparent","document","ready","render","controls","update","requestAnimationFrame","cameraHeight","camera","position","renderer","scene","onWindowResize","aspect","window","innerWidth","innerHeight","updateProjectionMatrix","setSize","webglEl","getElementById","width","height","tle","elektro1","line1","line2","elektro2","scale","sun","milkyway","Satellite","Scene","add","lensFlare","light","AmbientLight","when","loadObj","then","now","Date","object","set","propagate","copy","multiplyScalar","PerspectiveCamera","up","WebGLRenderer","antialias","alpha","setPixelRatio","devicePixelRatio","setClearColor","appendChild","domElement","TrackballControls","minDistance","maxDistance","AxisHelper","addEventListener","MeshBasicMaterial","map","ImageUtils","loadTexture","opacity","omega","this","axis","satrec","satellite","twoline2satrec","prototype","fixPosition","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","x","z","y","divideScalar","gmst","terraPosition","deg","_gmst","gstimeFromDate","applyAxisAngle","addLight","h","s","l","DirectionalLight","flareColor","Color","setHSL","LensFlare","textureFlare0","AdditiveBlending","textureFlare2","textureFlare3","customUpdateCallback","lensFlareUpdateCallback","f","flare","fl","lensFlares","vecX","positionScreen","vecY","distance","rotation","degToRad"],"mappings":"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","file":"elektro-tracker.min.js","sourcesContent":["'use strict';\n\n\nvar TRACKER = TRACKER || {};\n\nTRACKER.namespace = function(ns) {\n    var parts = ns.split('.'),\n        parent = TRACKER,\n        i;\n    if (parts[0] === \"TRACKER\") {\n        parts = parts.slice(1);\n    }\n    for (i = 0; i < parts.length; i += 1) {\n       if (typeof parent[parts[i]] === \"undefined\") {\n           parent[parts[i]] = {};\n       }\n       parent = parent[parts[i]];\n   }\n   return parent;\n};\n","TRACKER.namespace('utils');\n\nTRACKER.utils = (function() {\n    'use strict';\n\n    function defferedOBJLoader(staticData, name, url)\n    {\n        var defer = $.Deferred();\n        var loader = new THREE.OBJLoader();\n        loader.load(url, function ( event ) {\n            staticData[name] = event;\n            defer.resolve();\n        });\n\n        return defer;\n    }\n\n    return {\n        defferedOBJLoader: defferedOBJLoader,\n        defferedTextureLoader: undefined\n    }\n})();\n","'use strict';\n\n\nTRACKER.namespace('earth');\n\nTRACKER.earth = (function() {\n    var atmosphere = {\n        Kr: 0.0025,\n        Km: 0.0010,\n        ESun: 20.0,\n        g: -0.950,\n        innerRadius: 100.0,\n        outerRadius: 101.5,\n        wavelength: [0.550, 0.50, 0.475],\n        scaleDepth: 0.25,\n        mieScaleDepth: 0.1\n    };\n    var textureLoader = new THREE.TextureLoader(),\n        diffuse = textureLoader.load('/src/images/earth/diffuse-low.jpg'),\n        diffuseNight = textureLoader.load('/src/images/earth/diffuse-night-low.jpg'),\n        diffuseSpecular = textureLoader.load('/src/images/earth/diffuse-specular-low.png');\n\n    var uniforms = {\n        v3LightPosition: {\n            type: \"v3\",\n            value: new THREE.Vector3(1e8, 0, 1e8).normalize()\n        },\n        v3InvWavelength: {\n            type: \"v3\",\n            value: new THREE.Vector3(1 / Math.pow(atmosphere.wavelength[0], 4),\n                                     1 / Math.pow(atmosphere.wavelength[1], 4),\n                                     1 / Math.pow(atmosphere.wavelength[2], 4))\n        },\n        fCameraHeight: {\n            type: \"f\",\n            value: 0\n        },\n        fCameraHeight2: {\n            type: \"f\",\n            value: 0\n        },\n        fInnerRadius: {\n            type: \"f\",\n            value: atmosphere.innerRadius\n        },\n        fInnerRadius2: {\n            type: \"f\",\n            value: atmosphere.innerRadius * atmosphere.innerRadius\n        },\n        fOuterRadius: {\n            type: \"f\",\n            value: atmosphere.outerRadius\n        },\n        fOuterRadius2: {\n            type: \"f\",\n            value: atmosphere.outerRadius * atmosphere.outerRadius\n        },\n        fKrESun: {\n            type: \"f\",\n            value: atmosphere.Kr * atmosphere.ESun\n        },\n        fKmESun: {\n            type: \"f\",\n            value: atmosphere.Km * atmosphere.ESun\n        },\n        fKr4PI: {\n            type: \"f\",\n            value: atmosphere.Kr * 4.0 * Math.PI\n        },\n        fKm4PI: {\n            type: \"f\",\n            value: atmosphere.Km * 4.0 * Math.PI\n        },\n        fScale: {\n            type: \"f\",\n            value: 1 / (atmosphere.outerRadius - atmosphere.innerRadius)\n        },\n        fScaleDepth: {\n            type: \"f\",\n            value: atmosphere.scaleDepth\n        },\n        fScaleOverScaleDepth: {\n            type: \"f\",\n            value: 1 / (atmosphere.outerRadius - atmosphere.innerRadius) / atmosphere.scaleDepth\n        },\n        g: {\n            type: \"f\",\n            value: atmosphere.g\n        },\n        g2: {\n            type: \"f\",\n            value: atmosphere.g * atmosphere.g\n        },\n        nSamples: {\n            type: \"i\",\n            value: 3\n        },\n        fSamples: {\n            type: \"f\",\n            value: 3.0\n        },\n        tDiffuse: {\n            type: \"t\",\n            value: diffuse\n        },\n        tDiffuseNight: {\n            type: \"t\",\n            value: diffuseNight\n        },\n        tDiffuseSpecular: {\n                type: \"t\",\n                value: diffuseSpecular\n        },\n        tDisplacement: {\n            type: \"t\",\n            value: 0\n        },\n        tSkyboxDiffuse: {\n            type: \"t\",\n            value: 0\n        },\n        fNightScale: {\n            type: \"f\",\n            value: 1\n        },\n        fSpecularScale: {\n            type: \"f\",\n            value: 1\n        },\n        fSpecularSize: {\n            type: \"f\",\n            value: 25\n        }\n    };\n\n\n    var ground = {\n        geometry: new THREE.SphereGeometry(atmosphere.innerRadius, 50, 50),\n        material: new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: $(\"#vertexGround\").text(),\n            fragmentShader: $(\"#fragmentGround\").text()\n        })\n    };\n    ground.mesh = new THREE.Mesh(ground.geometry, ground.material);\n\n\n    var sky = {\n        geometry: new THREE.SphereGeometry(atmosphere.outerRadius, 500, 500),\n        material: new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: $(\"#vertexSky\").text(),\n            fragmentShader: $(\"#fragmentSky\").text()\n        })\n    };\n    sky.mesh = new THREE.Mesh(sky.geometry, sky.material);\n\n    sky.material.side = THREE.BackSide;\n    sky.material.transparent = true;\n\n    return {\n        ground: ground,\n        sky: sky\n    }\n\n})();\n","$(document).ready(function() {\n\t'use strict';\n\tvar webglEl = document.getElementById('scene');\n\n\tvar width  = window.innerWidth,\n\t\theight = window.innerHeight;\n\n\tvar tle = {\n\t\telektro1: {\n\t\t\t\"line1\": \"1 37344U 11001A   16084.50580970  .00000000  00000-0  10000-3 0  9991\",\n\t\t\t\"line2\": \"2 37344   1.5394  79.7599 0005633 181.1213 179.7726  1.00271467 19002\"\n\t\t},\n\t\telektro2: {\n\t\t\t\"line1\": \"1 41105U 15074A   16084.53509896 -.00000132  00000-0  00000+0 0  9998\",\n\t\t\t\"line2\": \"2 41105   0.2604 277.8149 0001219 144.5680  30.4420  1.00273958  1058\"\n\t\t}\n\t};\n\n\tvar scale = 63.71;\n\n    var earth = TRACKER.earth,\n\t\tsun = TRACKER.sun,\n\t\tmilkyway = TRACKER.milkyway,\n\t\telektro1 = new TRACKER.Satellite(tle.elektro1, scale),\n\t\telektro2 = new TRACKER.Satellite(tle.elektro2, scale);\n\n\tvar scene = new THREE.Scene();\n    scene.add(earth.ground.mesh);\n    scene.add(earth.sky.mesh);\n\tscene.add(sun.lensFlare);\n\tscene.add(sun.light);\n\tscene.add(new THREE.AmbientLight(0x333333));\n\n\t$.when(\n\t\telektro1.loadObj('/src/obj/elektro.obj'),\n\t\telektro2.loadObj('/src/obj/elektro.obj')\n\t)\n\t.then(function() {\n\t\tvar now = new Date(),\n\t\t\tposition;\n\t\telektro1.object.scale.set(1e-3, 1e-3, 1e-3);\n\t\tposition = elektro1.propagate(now);\n\n\t\telektro2.object.scale.set(1e-3, 1e-3, 1e-3);\n\t\telektro2.propagate(now);\n\n\t\tscene.add(elektro1.object);\n\t\tscene.add(elektro2.object);\n\n\t\tcamera.position.copy(position).multiplyScalar(1.05);\n\t\tearth.ground.material.uniforms.v3LightPosition.value.copy(position).normalize();\n\t\tsun.lensFlare.position.copy(position).multiplyScalar(1e1);\n\t\tsun.light.position.copy(position).multiplyScalar(1e1);\n\t\trender();\n\t});\n\n\tvar camera = new THREE.PerspectiveCamera(90, width / height, 1, 1e5);\n\tcamera.position.set(300, 50, -150);\n\tcamera.up = new THREE.Vector3( 0, 1, 0 );\n\n\tvar renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true});\n\trenderer.setPixelRatio(window.devicePixelRatio || 1);\n\trenderer.setSize(width, height);\n    renderer.setClearColor(0x000000, 1);\n    webglEl.appendChild(renderer.domElement);\n\n    var controls = new THREE.TrackballControls(camera);\n\tcontrols.minDistance = 300;\n\tcontrols.maxDistance = 1e5;\n\n\t// x: red, y: green, z: blue\n\tvar axisHelper = new THREE.AxisHelper( 1000 );\n\t// scene.add( axisHelper );\n\n\tfunction render() {\n\t\tcontrols.update();\n        requestAnimationFrame(render);\n\n        var cameraHeight = camera.position.length();\n        earth.sky.material.uniforms.fCameraHeight.value = cameraHeight;\n        earth.sky.material.uniforms.fCameraHeight2.value = cameraHeight * cameraHeight;\n        earth.ground.material.uniforms.fCameraHeight.value = cameraHeight;\n        earth.ground.material.uniforms.fCameraHeight2.value = cameraHeight * cameraHeight;\n\n        return renderer.render(scene, camera);\n\t}\n\n    function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize( window.innerWidth, window.innerHeight );\n    }\n    window.addEventListener( 'resize', onWindowResize, false );\n});\n","'use strict';\n\n\nTRACKER.namespace('milkyway');\n\n\nTRACKER.milkyway = (function() {\n    var milkyway = new THREE.Mesh(\n        new THREE.SphereGeometry(1e4, 64, 64),\n        new THREE.MeshBasicMaterial({\n            map: THREE.ImageUtils.loadTexture('/src/images/milkyway/milkyway.jpg'),\n            side: THREE.BackSide,\n            opacity: 0.1\n        })\n    )\n\n    return \t{\n        milkyway: milkyway\n    }\n})();\n","TRACKER.namespace('Satellite');\n\nTRACKER.Satellite = (function() {\n    'use strict';\n\n    var utils = TRACKER.utils,\n        omega = 2*Math.PI/86164.09,\n        Satellite;\n\n    Satellite = function(tle, scale) {\n        this.axis = new THREE.Vector3(0, 1, 0);\n        this.object = null;\n        this.satrec = satellite.twoline2satrec(tle.line1, tle.line2);\n        this.scale = scale;\n    };\n\n    Satellite.prototype.fixPosition = function(date) {\n        var position = satellite.propagate(\n    \t\tthis.satrec,\n    \t\tdate.getUTCFullYear(),\n    \t\tdate.getUTCMonth() + 1, // Note, this function requires months in range 1-12.\n    \t\tdate.getUTCDate(),\n    \t\tdate.getUTCHours(),\n    \t\tdate.getUTCMinutes(),\n    \t\tdate.getUTCSeconds()\n    \t).position;\n\n        return new THREE.Vector3(position.x, position.z, -position.y).divideScalar(this.scale);\n    };\n\n    Satellite.prototype.loadObj = function(url) {\n        return utils.defferedOBJLoader(this, \"object\", url);\n    };\n\n    Satellite.prototype.propagate = function(date, gmst) {\n        var position = this.terraPosition(date, gmst);\n        this.object.position.copy(position);\n\n        return position;\n    }\n\n    Satellite.prototype.terraPosition = function(date, gmst) {\n        var deg,\n            _gmst = gmst || satellite.gstimeFromDate(\n        \t\tdate.getUTCFullYear(),\n        \t\tdate.getUTCMonth() + 1, // Note, this function requires months in range 1-12.\n        \t\tdate.getUTCDate(),\n        \t\tdate.getUTCHours(),\n        \t\tdate.getUTCMinutes(),\n        \t\tdate.getUTCSeconds()\n        \t);\n\n        deg = _gmst * (180/Math.PI);\n        deg += (deg >= 360) ? -360 : (deg < 0) ? 360 : 0;\n\n        return this.fixPosition(date).applyAxisAngle(this.axis, -omega*deg/15*3600);\n    };\n\n    return Satellite;\n\n})();\n","'use strict';\n\n\nTRACKER.namespace('sun');\n\n\nTRACKER.sun = (function() {\n    var textureLoader = new THREE.TextureLoader(),\n        textureFlare0 = textureLoader.load( \"/src/images/lensflare/lensflare0.png\" ),\n        textureFlare2 = textureLoader.load( \"/src/images/lensflare/lensflare2.png\" ),\n        textureFlare3 = textureLoader.load( \"/src/images/lensflare/lensflare3.png\" );\n\n    var lensFlare,\n        light;\n\n    addLight( 0.55, 0.9, 0.5, 5000, 0, 5000 );\n\n\tfunction addLight( h, s, l, x, y, z ) {\n\t\tlight = new THREE.DirectionalLight( 0xffffff, 1 );\n\t\tlight.position.set( x, y, z );\n\n\t\tvar flareColor = new THREE.Color( 0xffffff );\n\t\tflareColor.setHSL( h, s, l + 0.5 );\n\t\tlensFlare = new THREE.LensFlare( textureFlare0, 350, 0.0, THREE.AdditiveBlending, flareColor );\n\t\tlensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 60, 0.6, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 70, 0.7, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 120, 0.9, THREE.AdditiveBlending );\n\t\tlensFlare.add( textureFlare3, 70, 1.0, THREE.AdditiveBlending );\n\t\tlensFlare.customUpdateCallback = lensFlareUpdateCallback;\n\t\tlensFlare.position.set( x, y, z );\n\t}\n\n    function lensFlareUpdateCallback( object ) {\n\t\tvar f, fl = object.lensFlares.length;\n\t\tvar flare;\n\t\tvar vecX = -object.positionScreen.x * 2;\n\t\tvar vecY = -object.positionScreen.y * 2;\n\t\tfor( f = 0; f < fl; f++ ) {\n\t\t\tflare = object.lensFlares[ f ];\n\t\t\tflare.x = object.positionScreen.x + vecX * flare.distance;\n\t\t\tflare.y = object.positionScreen.y + vecY * flare.distance;\n\t\t\tflare.rotation = 0;\n\t\t}\n\t\tobject.lensFlares[ 2 ].y += 0.025;\n\t\tobject.lensFlares[ 3 ].rotation = object.positionScreen.x * 0.5 + THREE.Math.degToRad( 45 );\n\t}\n\n    return {\n        light: light,\n        lensFlare: lensFlare\n    }\n\n})();\n"],"sourceRoot":"/source/"}