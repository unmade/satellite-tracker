"use strict";var TRACKER=TRACKER||{};TRACKER.namespace=function(R){var e,n=R.split("."),t=TRACKER;for("TRACKER"===n[0]&&(n=n.slice(1)),e=0;e<n.length;e+=1)"undefined"==typeof t[n[e]]&&(t[n[e]]={}),t=t[n[e]];return t};
TRACKER.namespace("utils"),TRACKER.utils=function(){"use strict";function e(e,r,d){var n=$.Deferred(),t=new THREE.OBJLoader;return t.load(d,function(d){e[r]=d,n.resolve()}),n}return{defferedOBJLoader:e,defferedTextureLoader:void 0}}();
"use strict";TRACKER.namespace("earth"),TRACKER.earth=function(){var e={Kr:.0025,Km:.001,ESun:20,g:-.95,innerRadius:100,outerRadius:101.5,wavelength:[.55,.5,.475],scaleDepth:.25,mieScaleDepth:.1},a=new THREE.TextureLoader,t=a.load("/src/images/earth/diffuse-low.jpg"),r=a.load("/src/images/earth/diffuse-night-low.jpg"),u=a.load("/src/images/earth/diffuse-specular-low.png"),l={v3LightPosition:{type:"v3",value:new THREE.Vector3(1e8,0,1e8).normalize()},v3InvWavelength:{type:"v3",value:new THREE.Vector3(1/Math.pow(e.wavelength[0],4),1/Math.pow(e.wavelength[1],4),1/Math.pow(e.wavelength[2],4))},fCameraHeight:{type:"f",value:0},fCameraHeight2:{type:"f",value:0},fInnerRadius:{type:"f",value:e.innerRadius},fInnerRadius2:{type:"f",value:e.innerRadius*e.innerRadius},fOuterRadius:{type:"f",value:e.outerRadius},fOuterRadius2:{type:"f",value:e.outerRadius*e.outerRadius},fKrESun:{type:"f",value:e.Kr*e.ESun},fKmESun:{type:"f",value:e.Km*e.ESun},fKr4PI:{type:"f",value:4*e.Kr*Math.PI},fKm4PI:{type:"f",value:4*e.Km*Math.PI},fScale:{type:"f",value:1/(e.outerRadius-e.innerRadius)},fScaleDepth:{type:"f",value:e.scaleDepth},fScaleOverScaleDepth:{type:"f",value:1/(e.outerRadius-e.innerRadius)/e.scaleDepth},g:{type:"f",value:e.g},g2:{type:"f",value:e.g*e.g},nSamples:{type:"i",value:3},fSamples:{type:"f",value:3},tDiffuse:{type:"t",value:t},tDiffuseNight:{type:"t",value:r},tDiffuseSpecular:{type:"t",value:u},tDisplacement:{type:"t",value:0},tSkyboxDiffuse:{type:"t",value:0},fNightScale:{type:"f",value:1},fSpecularScale:{type:"f",value:1},fSpecularSize:{type:"f",value:25}},i={geometry:new THREE.SphereGeometry(e.innerRadius,50,50),material:new THREE.ShaderMaterial({uniforms:l,vertexShader:$("#vertexGround").text(),fragmentShader:$("#fragmentGround").text()})};i.mesh=new THREE.Mesh(i.geometry,i.material);var n={geometry:new THREE.SphereGeometry(e.outerRadius,500,500),material:new THREE.ShaderMaterial({uniforms:l,vertexShader:$("#vertexSky").text(),fragmentShader:$("#fragmentSky").text()})};return n.mesh=new THREE.Mesh(n.geometry,n.material),n.material.side=THREE.BackSide,n.material.transparent=!0,{ground:i,sky:n}}();
$(document).ready(function(){"use strict";function e(){p.update(),requestAnimationFrame(e);var i=u.position.length();return l.sky.material.uniforms.fCameraHeight.value=i,l.sky.material.uniforms.fCameraHeight2.value=i*i,l.ground.material.uniforms.fCameraHeight.value=i,l.ground.material.uniforms.fCameraHeight2.value=i*i,w.render(m,u)}function i(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight)}var n=document.getElementById("scene"),t=window.innerWidth,a=window.innerHeight,o={elektro1:{line1:"1 37344U 11001A   16084.50580970  .00000000  00000-0  10000-3 0  9991",line2:"2 37344   1.5394  79.7599 0005633 181.1213 179.7726  1.00271467 19002"},elektro2:{line1:"1 41105U 15074A   16084.53509896 -.00000132  00000-0  00000+0 0  9998",line2:"2 41105   0.2604 277.8149 0001219 144.5680  30.4420  1.00273958  1058"}},r=63.71,l=TRACKER.earth,d=TRACKER.sun,s=(TRACKER.milkyway,new TRACKER.Satellite(o.elektro1,r)),c=new TRACKER.Satellite(o.elektro2,r),m=new THREE.Scene;m.add(l.ground.mesh),m.add(l.sky.mesh),m.add(d.lensFlare),m.add(d.light),m.add(new THREE.AmbientLight(3355443)),$.when(s.loadObj("/src/obj/elektro.obj"),c.loadObj("/src/obj/elektro.obj")).then(function(){var i,n=new Date;s.object.scale.set(.001,.001,.001),i=s.propagate(n),c.object.scale.set(.001,.001,.001),c.propagate(n),m.add(s.object),m.add(c.object),u.position.copy(i).multiplyScalar(1.05),l.ground.material.uniforms.v3LightPosition.value.copy(i).normalize(),d.lensFlare.position.copy(i).multiplyScalar(10),d.light.position.copy(i).multiplyScalar(10),e()});var u=new THREE.PerspectiveCamera(90,t/a,1,1e5);u.position.set(300,50,-150),u.up=new THREE.Vector3(0,1,0);var w=new THREE.WebGLRenderer({antialias:!0,alpha:!0});w.setPixelRatio(window.devicePixelRatio||1),w.setSize(t,a),w.setClearColor(0,1),n.appendChild(w.domElement);var p=new THREE.TrackballControls(u);p.minDistance=300,p.maxDistance=1e5;new THREE.AxisHelper(1e3);window.addEventListener("resize",i,!1)});
"use strict";TRACKER.namespace("milkyway"),TRACKER.milkyway=function(){var e=new THREE.Mesh(new THREE.SphereGeometry(1e4,64,64),new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("/src/images/milkyway/milkyway.jpg"),side:THREE.BackSide,opacity:.1}));return{milkyway:e}}();
TRACKER.namespace("Satellite"),TRACKER.Satellite=function(){"use strict";var t,e=TRACKER.utils,i=2*Math.PI/86164.09;return t=function(t,e){this.axis=new THREE.Vector3(0,1,0),this.object=null,this.satrec=satellite.twoline2satrec(t.line1,t.line2),this.scale=e},t.prototype.fixPosition=function(t){var e=satellite.propagate(this.satrec,t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).position;return new THREE.Vector3(e.x,e.z,-e.y).divideScalar(this.scale)},t.prototype.loadObj=function(t){return e.defferedOBJLoader(this,"object",t)},t.prototype.propagate=function(t,e){var i=this.terraPosition(t,e);return this.object.position.copy(i),i},t.prototype.terraPosition=function(t,e){var o,s=e||satellite.gstimeFromDate(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return o=s*(180/Math.PI),o+=o>=360?-360:0>o?360:0,this.fixPosition(t).applyAxisAngle(this.axis,-i*o/15*3600)},t}();
"use strict";TRACKER.namespace("sun"),TRACKER.sun=function(){function e(e,a,r,o,E,c){s=new THREE.DirectionalLight(16777215,1),s.position.set(o,E,c);var g=new THREE.Color(16777215);g.setHSL(e,a,r+.5),i=new THREE.LensFlare(l,350,0,THREE.AdditiveBlending,g),i.add(d,512,0,THREE.AdditiveBlending),i.add(t,60,.6,THREE.AdditiveBlending),i.add(t,70,.7,THREE.AdditiveBlending),i.add(t,120,.9,THREE.AdditiveBlending),i.add(t,70,1,THREE.AdditiveBlending),i.customUpdateCallback=n,i.position.set(o,E,c)}function n(e){var n,i,s=e.lensFlares.length,a=2*-e.positionScreen.x,l=2*-e.positionScreen.y;for(n=0;s>n;n++)i=e.lensFlares[n],i.x=e.positionScreen.x+a*i.distance,i.y=e.positionScreen.y+l*i.distance,i.rotation=0;e.lensFlares[2].y+=.025,e.lensFlares[3].rotation=.5*e.positionScreen.x+THREE.Math.degToRad(45)}var i,s,a=new THREE.TextureLoader,l=a.load("/src/images/lensflare/lensflare0.png"),d=a.load("/src/images/lensflare/lensflare2.png"),t=a.load("/src/images/lensflare/lensflare3.png");return e(.55,.9,.5,5e3,0,5e3),{light:s,lensFlare:i}}();
//# sourceMappingURL=elektro-tracker.min.js.map
