"use strict";var TRACKER=TRACKER||{};TRACKER.namespace=function(R){var e,n=R.split("."),t=TRACKER;for("TRACKER"===n[0]&&(n=n.slice(1)),e=0;e<n.length;e+=1)"undefined"==typeof t[n[e]]&&(t[n[e]]={}),t=t[n[e]];return t};
"use strict";TRACKER.namespace("earth"),TRACKER.earth=function(){var e={Kr:.0025,Km:.001,ESun:20,g:-.95,innerRadius:100,outerRadius:102.5,wavelength:[.65,.57,.475],scaleDepth:.25,mieScaleDepth:.1},a=THREE.ImageUtils.loadTexture("/src/images/diffuse-low.jpg"),t=THREE.ImageUtils.loadTexture("/src/images/diffuse-night-low.jpg"),r={v3LightPosition:{type:"v3",value:new THREE.Vector3(1e8,0,1e8).normalize()},v3InvWavelength:{type:"v3",value:new THREE.Vector3(1/Math.pow(e.wavelength[0],4),1/Math.pow(e.wavelength[1],4),1/Math.pow(e.wavelength[2],4))},fCameraHeight:{type:"f",value:0},fCameraHeight2:{type:"f",value:0},fInnerRadius:{type:"f",value:e.innerRadius},fInnerRadius2:{type:"f",value:e.innerRadius*e.innerRadius},fOuterRadius:{type:"f",value:e.outerRadius},fOuterRadius2:{type:"f",value:e.outerRadius*e.outerRadius},fKrESun:{type:"f",value:e.Kr*e.ESun},fKmESun:{type:"f",value:e.Km*e.ESun},fKr4PI:{type:"f",value:4*e.Kr*Math.PI},fKm4PI:{type:"f",value:4*e.Km*Math.PI},fScale:{type:"f",value:1/(e.outerRadius-e.innerRadius)},fScaleDepth:{type:"f",value:e.scaleDepth},fScaleOverScaleDepth:{type:"f",value:1/(e.outerRadius-e.innerRadius)/e.scaleDepth},g:{type:"f",value:e.g},g2:{type:"f",value:e.g*e.g},nSamples:{type:"i",value:3},fSamples:{type:"f",value:3},tDiffuse:{type:"t",value:a},tDiffuseNight:{type:"t",value:t},tDisplacement:{type:"t",value:0},tSkyboxDiffuse:{type:"t",value:0},fNightScale:{type:"f",value:1}},u={geometry:new THREE.SphereGeometry(e.innerRadius,50,50),material:new THREE.ShaderMaterial({uniforms:r,vertexShader:$("#vertexGround").text(),fragmentShader:$("#fragmentGround").text()})};u.mesh=new THREE.Mesh(u.geometry,u.material);var i={geometry:new THREE.SphereGeometry(e.outerRadius,500,500),material:new THREE.ShaderMaterial({uniforms:r,vertexShader:$("#vertexSky").text(),fragmentShader:$("#fragmentSky").text()})};return i.mesh=new THREE.Mesh(i.geometry,i.material),i.material.side=THREE.BackSide,i.material.transparent=!0,{ground:u,sky:i}}();
$(document).ready(function(){function e(){E.update(),requestAnimationFrame(e);var n,i,r,t,a,l=2e-4,m=.008;return a=new THREE.Vector3(1,0,0),i=new THREE.Euler(l,m,0),t=(new THREE.Matrix4).makeRotationFromEuler(i),r=a.applyMatrix4(t),n=u.position.length(),o.sky.material.uniforms.v3LightPosition.value=r,o.sky.material.uniforms.fCameraHeight.value=n,o.sky.material.uniforms.fCameraHeight2.value=n*n,o.ground.material.uniforms.v3LightPosition.value=r,o.ground.material.uniforms.fCameraHeight.value=n,o.ground.material.uniforms.fCameraHeight2.value=n*n,s.render(d,u)}function n(e){function n(e,n,i){return new THREE.Vector3(e,n,i)}function i(e,n,i){var r,t=new THREE.Geometry,a=new THREE.LineBasicMaterial({color:i});t.vertices.push(e,n),r=new THREE.Line(t,a),d.add(r)}i(n(-e,0,0),n(e,0,0),16711680),i(n(0,-e,0),n(0,e,0),65280),i(n(0,0,-e),n(0,0,e),255)}function i(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}var r=document.getElementById("scene"),t=window.innerWidth,a=window.innerHeight,o=TRACKER.earth,d=new THREE.Scene;d.add(o.ground.mesh),d.add(o.sky.mesh);var u=new THREE.PerspectiveCamera(70,t/a,.1,1e3);u.position.set(200,0,0),u.up=new THREE.Vector3(0,0,1);var s=new THREE.WebGLRenderer({antialias:!0});s.setPixelRatio(window.devicePixelRatio||1),s.setSize(t,a),s.setClearColor(0,1),r.appendChild(s.domElement);var E=new THREE.TrackballControls(u),l=n;l(200),e(),window.addEventListener("resize",i,!1)});
//# sourceMappingURL=elektro-tracker.min.js.map
