"use strict";var TRACKER=TRACKER||{};TRACKER.namespace=function(R){var e,n=R.split("."),t=TRACKER;for("TRACKER"===n[0]&&(n=n.slice(1)),e=0;e<n.length;e+=1)"undefined"==typeof t[n[e]]&&(t[n[e]]={}),t=t[n[e]];return t};
TRACKER.namespace("utils.Constants"),TRACKER.utils.Constants=function(){"use strict";return{AU:149597870.691,DIFF_EPOCH:2400000.5,GRAD_IN_RAD:.017453292519943295,JULIAN_C:36525,MJD2000:51544.5,OMEGA:2*Math.PI/86164.090530833,PI2:2*Math.PI,SEC_IN_DAY:86400,SEC_IN_RAD:484813681109536e-20,TT_TAI_DIFF:32.184,R0:6378.1363}}();
TRACKER.namespace("utils.CoordinateConverter"),TRACKER.utils.CoordinateConverter=function(){"use strict";function t(t,e,n,o){var s=a(t);return new THREE.Vector3(o*Math.cos(n)*Math.cos(e),o*Math.cos(n)*(Math.cos(s)*Math.sin(e)-Math.sin(s)*Math.tan(n)),o*Math.cos(n)*(Math.sin(s)*Math.sin(e)+Math.cos(s)*Math.tan(n)))}function e(t,e,n,o){var s=a(t);return new THREE.Vector3(e,n*Math.cos(s)-o*Math.sin(s),n*Math.sin(s)+o*Math.cos(s))}function a(t){var e=(t-s.MJD2000)/s.JULIAN_C,a=e*e,n=e*a;return s.SEC_IN_RAD*(84381.448-46.815*e-59e-5*a+.001813*n)}function n(t){return satellite.gstimeFromDate(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}function o(t,e,a){return new THREE.Vector3(a*Math.cos(e)*Math.cos(t),a*Math.cos(e)*Math.sin(t),a*Math.sin(e))}var s=TRACKER.utils.Constants;return{eclipSpherToEquCart:t,eclipticToEquatorial:e,getGMST:n,getEpsMean:a,sphericalToCartesian:o}}();
TRACKER.namespace("utils.DateConverter"),TRACKER.utils.DateConverter=function(){"use strict";function e(e){var a=e.getUTCFullYear(),s=e.getUTCMonth()+1,r=e.getUTCDate(),t=e.getUTCHours(),b=e.getUTCMinutes(),k=e.getUTCSeconds(),n=parseInt((14-s)/12),u=a+4800-n,T=s+12*n-3,C=r+parseInt((153*T+2)/5)+365*u+parseInt(u/4)-parseInt(u/100)+parseInt(u/400)-32045,o=C+(t-12)/24+b/1440+k/86400;return o-c.DIFF_EPOCH}function a(e){var a=s(e),r=(a-c.MJD2000)/c.JULIAN_C,t=c.GRAD_IN_RAD*(12860948.6049*r);return a+.001658*Math.sin(t+.0167*Math.sin(t))/c.SEC_IN_DAY}function s(a){var s=e(a),t=r(a.getUTCFullYear(),a.getUTCMonth()+1);return s+t/c.SEC_IN_DAY}function r(e,a){var s=0;switch(e){case 1972:s=a>0&&7>a?10:11;break;case 1973:s=12;break;case 1974:s=13;break;case 1975:s=14;break;case 1976:s=15;break;case 1977:s=16;break;case 1978:s=17;break;case 1979:s=18;break;case 1980:s=19;break;case 1981:s=a>0&&7>a?19:20;break;case 1982:s=a>0&&7>a?20:21;break;case 1983:s=a>0&&7>a?21:22;break;case 1984:s=22;break;case 1985:s=a>0&&7>a?22:23;break;case 1986:case 1987:s=23;break;case 1988:case 1989:s=24;break;case 1990:s=25;break;case 1991:s=26;break;case 1992:s=a>0&&7>a?26:27;break;case 1993:s=a>0&&7>a?27:28;break;case 1994:s=a>0&&7>a?28:29;break;case 1995:s=29;break;case 1996:s=30;break;case 1997:s=a>0&&7>a?30:31;break;case 1998:s=31;break;case 1999:case 2e3:case 2001:case 2002:case 2003:case 2004:case 2005:s=32;break;case 2006:case 2007:case 2008:s=33;break;case 2009:case 2010:case 2011:s=34;break;case 2012:s=a>0&&7>a?34:35;break;case 2013:case 2014:s=35;break;case 2015:s=a>0&&7>a?35:36;break;default:s=e>1972?36:10}return s+c.TT_TAI_DIFF}var c=TRACKER.utils.Constants;return{getDeltaT:r,utcToMjd:e,utcToTdb:a,utcToTT:s}}();
TRACKER.namespace("utils.Loaders"),TRACKER.utils.Loaders=function(){"use strict";function e(e,r,o){var n=$.Deferred(),d=new THREE.OBJLoader;return d.load(o,function(o){e[r]=o,n.resolve()}),n}function r(e,r,o,n){var d=$.Deferred(),a=new THREE.MTLLoader;return a.load(n,function(n){n.preload();var a=new THREE.OBJLoader;a.setMaterials(n),a.load(o,function(o){e[r]=o,d.resolve()})}),d.promise()}function o(e,r,o){var n=$.Deferred(),d=new THREE.TextureLoader;return d.load(o,function(o){e[r]=o,n.resolve()}),n}return{defferedOBJLoader:e,defferedOBJMTLLoader:r,defferedTextureLoader:o}}();
TRACKER.namespace("CelestialObject"),TRACKER.CelestialObject=function(){"use strict";function e(t){var r,i,s,a;this.atmosphere={Kr:.0025,Km:.001,ESun:20,g:-.95,innerRadius:100,innerSegments:50,outerRadius:101.5,outerSegments:128,wavelength:[.55,.5,.475],scaleDepth:.25},t&&(t.atmosphere&&$.extend(this.atmosphere,t.atmosphere),r=t.diffuse,i=t.diffuseNight,s=t.diffuseSpecular),a=e.uniforms.configureUniforms(r,i,s,this.atmosphere),this.ground=new THREE.Mesh(new THREE.SphereGeometry(this.atmosphere.innerRadius,this.atmosphere.innerSegments,this.atmosphere.innerSegments),new THREE.ShaderMaterial({uniforms:a,vertexShader:$("#vertexGround").text(),fragmentShader:$("#fragmentGround").text()})),this.sky=new THREE.Mesh(new THREE.SphereGeometry(this.atmosphere.outerRadius,this.atmosphere.outerSegments,this.atmosphere.outerSegments),new THREE.ShaderMaterial({uniforms:a,vertexShader:$("#vertexSky").text(),fragmentShader:$("#fragmentSky").text(),side:THREE.BackSide,transparent:!0}))}return e.prototype.ESun=function(t){if(!arguments.length)return this.atmosphere.ESun;var r=e.uniforms.calcfKrESun(this.atmosphere.Kr,t),i=e.uniforms.calcfKmESun(this.atmosphere.Km,t);return this.atmosphere.ESun=t,this.ground.material.uniforms.fKrESun.value=r,this.ground.material.uniforms.fKmESun.value=i,this.sky.material.uniforms.fKmESun.value=i,this.sky.material.uniforms.fKrESun.value=r,this},e.prototype.g=function(e){if(!arguments.length)return this.atmosphere.g;var t=e*e;return this.atmosphere.g=e,this.sky.material.uniforms.g.value=e,this.sky.material.uniforms.g2.value=t,this.ground.material.uniforms.g.value=e,this.ground.material.uniforms.g2.value=t,this},e.prototype.Km=function(t){if(!arguments.length)return this.atmosphere.Km;var r=e.uniforms.calcfKmESun(t,this.atmosphere.ESun),i=e.uniforms.calcfKm4PI(t);return this.atmosphere.Km=t,this.ground.material.uniforms.fKmESun.value=r,this.ground.material.uniforms.fKm4PI.value=i,this.sky.material.uniforms.fKm4PI.value=i,this.sky.material.uniforms.fKmESun.value=r,this},e.prototype.Kr=function(t){if(!arguments.length)return this.atmosphere.Kr;var r=e.uniforms.calcfKrESun(t,this.atmosphere.ESun),i=e.uniforms.calcfKr4PI(t);return this.atmosphere.Kr=t,this.ground.material.uniforms.fKrESun.value=r,this.ground.material.uniforms.fKr4PI.value=i,this.sky.material.uniforms.fKr4PI.value=i,this.sky.material.uniforms.fKrESun.value=r,this},e.prototype.lightPosition=function(e){return arguments.length?(this.ground.material.uniforms.v3LightPosition.value.copy(e).normalize(),this.sky.material.uniforms.v3LightPosition.value.copy(e).normalize(),this):this.ground.material.uniforms.v3LightPosition.value},e.prototype.position=function(e){return arguments.length?(this.ground.position.copy(e),this.sky.position.copy(e),this):this.ground.position},e.prototype.rotateY=function(e){var t=Math.cos(e),r=Math.sin(e);return this.ground.rotation.y=e,this.ground.material.uniforms.m3RotY.value.set(t,0,-r,0,1,0,r,0,t),this.sky.rotation.y=e,this.sky.material.uniforms.m3RotY.value.set(t,0,-r,0,1,0,r,0,t),this},e.prototype.setTextures=function(e){return e.diffuse&&(this.ground.material.uniforms.tDiffuse.value=e.diffuse),e.diffuseNight&&(this.ground.material.uniforms.tDiffuseNight.value=e.diffuseNight),e.diffuseSpecular&&(this.ground.material.uniforms.tDiffuseSpecular.value=e.diffuseSpecular),this},e.prototype.scaleDepth=function(t){if(!arguments.length)return this.atmosphere.scaleDepth;var r=e.uniforms.calcfScaleOverScaleDepth(this.atmosphere.innerRadius,this.atmosphere.outerRadius,this.atmosphere.scaleDepth);return this.atmosphere.scaleDepth=t,this.ground.material.uniforms.fScaleDepth.value=t,this.ground.material.uniforms.fScaleDepth.value=t,this.sky.material.uniforms.fScaleOverScaleDepth.value=r,this.sky.material.uniforms.fScaleOverScaleDepth.value=r,this},e.prototype.waveBlue=function(t){if(!arguments.length)return this.atmosphere.wavelength[2];var r=e.uniforms.calcvWaveChannel(t);return this.atmosphere.wavelength[2]=t,this.ground.material.uniforms.v3InvWavelength.value.setZ(r),this.sky.material.uniforms.v3InvWavelength.value.setZ(r),this},e.prototype.waveGreen=function(t){if(!arguments.length)return this.atmosphere.wavelength[1];var r=e.uniforms.calcvWaveChannel(t);return this.atmosphere.wavelength[1]=t,this.ground.material.uniforms.v3InvWavelength.value.setY(r),this.sky.material.uniforms.v3InvWavelength.value.setY(r),this},e.prototype.waveRed=function(t){if(!arguments.length)return this.atmosphere.wavelength[0];var r=e.uniforms.calcvWaveChannel(t);return this.atmosphere.wavelength[0]=t,this.ground.material.uniforms.v3InvWavelength.value.setX(r),this.sky.material.uniforms.v3InvWavelength.value.setX(r),this},e}();
TRACKER.namespace("CelestialObject.uniforms"),TRACKER.CelestialObject.uniforms=function(){"use strict";function e(e,t){return e*t}function t(e,t){return e*t}function u(e){return 4*e*Math.PI}function a(e){return 4*e*Math.PI}function n(e,t,u){return 1/(t-e)/u}function f(e){return 1/Math.pow(e,4)}function l(l,r,i,c){return{m3RotY:{type:"m3",value:new THREE.Matrix3},v3LightPosition:{type:"v3",value:new THREE.Vector3(1e8,0,1e8).normalize()},v3InvWavelength:{type:"v3",value:new THREE.Vector3(f(c.wavelength[0]),f(c.wavelength[1]),f(c.wavelength[2]))},fCameraHeight:{type:"f",value:0},fCameraHeight2:{type:"f",value:0},fInnerRadius:{type:"f",value:c.innerRadius},fInnerRadius2:{type:"f",value:c.innerRadius*c.innerRadius},fOuterRadius:{type:"f",value:c.outerRadius},fOuterRadius2:{type:"f",value:c.outerRadius*c.outerRadius},fKrESun:{type:"f",value:e(c.Kr,c.ESun)},fKmESun:{type:"f",value:t(c.Km,c.ESun)},fKr4PI:{type:"f",value:u(c.Kr)},fKm4PI:{type:"f",value:a(c.Km)},fScale:{type:"f",value:1/(c.outerRadius-c.innerRadius)},fScaleDepth:{type:"f",value:c.scaleDepth},fScaleOverScaleDepth:{type:"f",value:n(c.innerRadius,c.outerRadius,c.scaleDepth)},g:{type:"f",value:c.g},g2:{type:"f",value:c.g*c.g},tDiffuse:{type:"t",value:l},tDiffuseNight:{type:"t",value:r},tDiffuseSpecular:{type:"t",value:i},fNightScale:{type:"f",value:1},fSpecularScale:{type:"f",value:1},fSpecularSize:{type:"f",value:25}}}return{calcfKrESun:e,calcfKmESun:t,calcfKr4PI:u,calcfKm4PI:a,calcfScaleOverScaleDepth:n,calcvWaveChannel:f,configureUniforms:l}}();
"use strict";TRACKER.namespace("milkyway"),TRACKER.milkyway=function(){var e=new THREE.Mesh(new THREE.SphereGeometry(1e4,64,64),new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("/src/images/milkyway/milkyway.jpg"),side:THREE.BackSide,opacity:.1}));return{milkyway:e}}();
TRACKER.namespace("MoonPosition"),TRACKER.MoonPosition=function(){"use strict";function t(t){return t%1}var n=TRACKER.utils.Constants,i=TRACKER.utils.CoordinateConverter,s=TRACKER.utils.DateConverter;return{getEclipticPosition:function(i){var a=(s.utcToMjd(i)-n.MJD2000)/n.JULIAN_C,o=t(.606433+1336.855225*a),M=n.PI2*t(.374897+1325.55241*a),h=n.PI2*t(.993133+99.997361*a),c=n.PI2*t(.827361+1236.853086*a),e=n.PI2*t(.259086+1342.227825*a),r=22640*Math.sin(M)-4586*Math.sin(M-2*c)+2370*Math.sin(2*c)+769*Math.sin(2*M)-668*Math.sin(h)-412*Math.sin(2*e)-212*Math.sin(2*M-2*c)-206*Math.sin(M+h-2*c)+192*Math.sin(M+2*c)-165*Math.sin(h-2*h)-125*Math.sin(c)-110*Math.sin(M+h)+148*Math.sin(M-h)-55*Math.sin(2*e-2*c),u=e+n.SEC_IN_RAD*(r+412*Math.sin(2*e)+541*Math.sin(h)),E=e-2*c,R=-526*Math.sin(E)+44*Math.sin(M+E)-31*Math.sin(-M+E)-23*Math.sin(h+E)+11*Math.sin(-h+E)-25*Math.sin(-2*M+e)+21*Math.sin(-M+e),C=n.PI2*t(o+r/1296e3),T=n.SEC_IN_RAD*(18520*Math.sin(u)+R),P=3422.7+28.233869*Math.cos(2*c)+3.08589*Math.cos(M+2*c)+186.539296*Math.cos(M)+34.311569*Math.cos(M-2*c)+1.916735*Math.cos(h-2*c)-.977818*Math.cos(c)+10.165933*Math.cos(2*M)-.949147*Math.cos(M+h)+1.443617*Math.cos(M+h-2*c),A=n.R0/(.999953253*n.SEC_IN_RAD*P);return new THREE.Vector3(C,T,A)},getEquatorialPosition:function(t){var n=s.utcToTdb(t),a=this.getEclipticPosition(t),o=i.eclipSpherToEquCart(n,a.x,a.y,a.z);return new THREE.Vector3(o.x,o.z,-o.y)}}}();
TRACKER.namespace("Satellite"),TRACKER.Satellite=function(){"use strict";var t;TRACKER.utils.Constants,TRACKER.utils.CoordinateConverter;return t=function(t,e,i){this.object3d=i,this.satrec=satellite.twoline2satrec(t.line1,t.line2),this.scale=e},t.prototype.setObj=function(t){this.object3d=t},t.prototype.position=function(t,e){var i=satellite.propagate(this.satrec,t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).position;return new THREE.Vector3(i.x,i.z,-i.y).divideScalar(this.scale)},t.prototype.propagate=function(t,e){var i=this.position(t,e);return this.object3d.position.copy(i),i},t}();
TRACKER.namespace("Sun"),TRACKER.Sun=function(){"use strict";function t(t){return t%1}function e(t){var e,i,n=t.lensFlares.length,s=2*-t.positionScreen.x,o=2*-t.positionScreen.y;for(e=0;n>e;e++)i=t.lensFlares[e],i.x=t.positionScreen.x+s*i.distance,i.y=t.positionScreen.y+o*i.distance,i.rotation=0;t.lensFlares[2].y+=.025,t.lensFlares[3].rotation=.5*t.positionScreen.x+THREE.Math.degToRad(45)}var i=TRACKER.utils.Constants,n=TRACKER.utils.CoordinateConverter,s=TRACKER.utils.DateConverter,o=function(t,i,n){var s=new THREE.Color(16777215);i?s.setHSL(i.h,i.s,i.l+.5):s.setHSL(.55,.9,1),this.light=new THREE.DirectionalLight(16777215,1),this.lensFlare=new THREE.LensFlare(t[0],350,0,THREE.AdditiveBlending,s),this.lensFlare.add(t[1],512,0,THREE.AdditiveBlending),this.lensFlare.add(t[2],60,.6,THREE.AdditiveBlending),this.lensFlare.add(t[2],70,.7,THREE.AdditiveBlending),this.lensFlare.add(t[2],120,.9,THREE.AdditiveBlending),this.lensFlare.add(t[2],70,1,THREE.AdditiveBlending),this.lensFlare.customUpdateCallback=e,this.scale=n||63.71};return o.prototype.sunEclipticPosition=function(e){var n=s.utcToTdb(e),o=(n-i.MJD2000)/i.JULIAN_C,a=i.PI2*t(.993133+99.997361*o),r=i.PI2*t(.7859453+a/i.PI2+(6893*Math.sin(a)+72*Math.sin(2*a)+6191.2*o)/1296e3),l=0,d=1.0001398+1e-6*((-16707.37+42.04*o)*Math.cos(a)-139.57*Math.cos(2*a)+30.76*Math.cos(i.PI2*t(.8274+1236.8531*o)));return{lambda:r,betta:l,range:d*i.AU}},o.prototype.position=function(t){var e=s.utcToTdb(t),i=this.sunEclipticPosition(t),o=n.eclipSpherToEquCart(e,i.lambda,i.betta,i.range);return new THREE.Vector3(o.x,o.z,-o.y).divideScalar(this.scale)},o.prototype.propagate=function(t){var e=this.position(t);return this.lensFlare.position.copy(e),this.light.position.copy(e),e},o}();
//# sourceMappingURL=elektro-tracker.min.js.map
